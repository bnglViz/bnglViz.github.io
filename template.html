<!DOCTYPE html>
<html lang="en">
<head>
    <title>BNGL Visualizer</title>
    <link rel="stylesheet" type="text/css" href="public/styleblack.css"/>
    <link id="test-link" href="/models/test.bngl"/>
</head>
<body>
<p><h1>BioNetGenLanguage (BNGL) code visualizer</h1></p>
<table cellpadding="30">
    <tr>
    <td id="canvas-text">
      <a href=bngl.html>What is BNGL</a>
    </td>
    <td id="canvas-text">
      <a href=index.html><b>BNGL VISUALIZER</b></a>
    </td>
    <td id="canvas-text">
      <a href=viz.html>Visualization conventions</a>
    </td>
    <td id="canvas-text">
      <a href=about.html>About</a>
    </td>
  </tr>
</table>
    <hr>
    <h2>Visualize BioNetGen model</h2>
    <table>
    <tr>
    <td>
      <!--<button onclick="switchDarkMode();">Toggle DarkMode</button>-->
    </td>
    <td id="canvas-cell">
      <canvas id="testCanvas" class="bngl-canvas"></canvas>
    </td>
    <td id="canvas-text">
      Molecule is shown as an oval ...
    </td>
  </tr>
</table>
<div id="canvas-container"></div>
<div id="table-container"></div>
<script src="public/model-graphics.js"></script>
<script src="public/bngl-extractor.js"></script>
<script src="public/html-interface.js"></script>
<script>
  //get major elements
  const testCanvas = document.getElementById("testCanvas");
  const canvContain = document.getElementById("canvas-container");
  const tableContain = document.getElementById("table-container");
  const fileInput = document.getElementById("bngl-file-input");
  const body = document.body;

  //connect interface
  var htmlInterface = new HTMLInterface();

  //templating then bngl file
  var blob = new Blob(["#cringe"], {type: "text/plain"});
  let reader = new FileReader();
  reader.onload = () => {htmlInterface.visualize(reader.result);};
  reader.readAsText(blob);

  //draw test canvas
  testCanvas.width = htmlInterface.maxWidth;
  testCanvas.height = htmlInterface.maxHeight;
  htmlInterface.drawBNGL('@EC:EGF(rb)', testCanvas);

  //function to reset input element value when it is clicked
  //this is needed because chrome doesn't trigger onchange if filename is same
  function inputClick() {
    fileInput.value = "";
  }
</script>
</body>
</html>
